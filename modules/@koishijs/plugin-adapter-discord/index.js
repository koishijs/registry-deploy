var vE=Object.create;var V=Object.defineProperty;var WE=Object.getOwnPropertyDescriptor;var YE=Object.getOwnPropertyNames;var kE=Object.getPrototypeOf,wE=Object.prototype.hasOwnProperty;var eE=(E,_)=>()=>(E&&(_=E(E=0)),_);var v=(E,_)=>()=>(_||E((_={exports:{}}).exports,_),_.exports),KE=(E,_)=>{for(var e in _)V(E,e,{get:_[e],enumerable:!0})},B=(E,_,e,t)=>{if(_&&typeof _=="object"||typeof _=="function")for(let i of YE(_))!wE.call(E,i)&&i!==e&&V(E,i,{get:()=>_[i],enumerable:!(t=WE(_,i))||t.enumerable});return E},T=(E,_,e)=>(B(E,_,"default"),e&&B(e,_,"default")),_E=(E,_,e)=>(e=E!=null?vE(kE(E)):{},B(_||!E||!E.__esModule?V(e,"default",{value:E,enumerable:!0}):e,E)),f=E=>B(V({},"__esModule",{value:!0}),E);import{Buffer as P}from"https://registry.koishi.chat/modules/buffer/index.js";import m from"https://registry.koishi.chat/modules/process/index.js";var R=eE(()=>{});var l={};import*as Ae from"https://registry.koishi.chat/modules/koishi/index.js";var M=eE(()=>{R();T(l,Ae)});var tE=v((de,iE)=>{R();iE.exports=typeof self=="object"?self.FormData:window.FormData});import jE from"https://registry.koishi.chat/modules/util/index.js";var rE=v((Se,sE)=>{R();sE.exports=jE});var AE=v((Re,xE)=>{xE.exports={name:"@satorijs/adapter-discord",description:"Discord Adapter for Satorijs",version:"3.5.7",main:"lib/index.js",typings:"lib/index.d.ts",files:["lib"],author:"LittleC <i@ltlec.cn>",contributors:["Shigma <shigma10826@gmail.com>","LittleC <i@ltlec.cn>"],license:"MIT",repository:{type:"git",url:"git+https://github.com/satorijs/satori.git",directory:"adapters/discord"},bugs:{url:"https://github.com/satorijs/satori/issues"},homepage:"https://koishi.chat/plugins/adapter/discord.html",keywords:["bot","discord","chatbot","satori"],peerDependencies:{"@satorijs/satori":"^2.2.0"},dependencies:{"form-data":"^4.0.0"}}});var EE=v((ae,BE)=>{R();var JE=Object.create,b=Object.defineProperty,QE=Object.getOwnPropertyDescriptor,$E=Object.getOwnPropertyNames,XE=Object.getPrototypeOf,qE=Object.prototype.hasOwnProperty,I=(E,_)=>b(E,"name",{value:_,configurable:!0}),dE=(E,_)=>{for(var e in _)b(E,e,{get:_[e],enumerable:!0})},nE=(E,_,e,t)=>{if(_&&typeof _=="object"||typeof _=="function")for(let i of $E(_))!qE.call(E,i)&&i!==e&&b(E,i,{get:()=>_[i],enumerable:!(t=QE(_,i))||t.enumerable});return E},zE=(E,_,e)=>(e=E!=null?JE(XE(E)):{},nE(_||!E||!E.__esModule?b(e,"default",{value:E,enumerable:!0}):e,E)),ZE=E=>nE(b({},"__esModule",{value:!0}),E),IE={};dE(IE,{Discord:()=>NE,DiscordBot:()=>G,DiscordMessenger:()=>L,WsClient:()=>U,adaptAuthor:()=>SE,adaptChannel:()=>k,adaptGuild:()=>Y,adaptMessage:()=>C,adaptSession:()=>F,adaptUser:()=>O,default:()=>Ee,prepareMessage:()=>W});BE.exports=ZE(IE);var h=(M(),f(l)),n=(M(),f(l)),O=I(E=>({userId:E.id,avatar:`https://cdn.discordapp.com/avatars/${E.id}/${E.avatar}.png`,username:E.username,discriminator:E.discriminator,isBot:E.bot||!1}),"adaptUser"),Y=I(E=>({guildId:E.id,guildName:E.name}),"adaptGuild"),k=I(E=>({channelId:E.id,channelName:E.name}),"adaptChannel"),SE=I(E=>({...O(E),nickname:E.username}),"adaptAuthor");async function C(E,_,e={}){var t,i,A;let{platform:S}=E;W(e,_),e.messageId=_.id,e.timestamp=new Date(_.timestamp).valueOf()||Date.now(),_.author&&(e.author=SE(_.author),e.userId=_.author.id),(t=_.member)!=null&&t.nick&&(e.author.nickname=(i=_.member)==null?void 0:i.nick),e.content="",_.content&&(e.content=_.content.replace(/<@[!&]?(.+?)>/g,(s,d)=>{var N;if(_.mention_roles.includes(d))return(0,n.segment)("at",{role:d}).toString();{let a=(N=_.mentions)==null?void 0:N.find(g=>g.id===d||`${g.username}#${g.discriminator}`===d);return n.segment.at(d,{name:a?.username}).toString()}}).replace(/<a?:(.*):(.+?)>/g,(s,d,N)=>{let a=s[1]==="a";return(0,n.segment)("face",{id:N,name:d,animated:a,platform:S},[n.segment.image(`https://cdn.discordapp.com/emojis/${N}.gif?quality=lossless`)]).toString()}).replace(/@everyone/g,()=>(0,n.segment)("at",{type:"all"}).toString()).replace(/@here/g,()=>(0,n.segment)("at",{type:"here"}).toString()).replace(/<#(.+?)>/g,(s,d)=>{var N;let a=(N=_.mention_channels)==null?void 0:N.find(g=>g.id===d);return n.segment.sharp(d,{name:a?.name}).toString()})),(A=_.attachments)!=null&&A.length&&(e.content&&(e.content+=" "),e.content+=_.attachments.map(s=>{var d,N,a;return s.height&&s.width&&((d=s.content_type)!=null&&d.startsWith("image/"))?(0,n.segment)("image",{url:s.url,proxy_url:s.proxy_url,file:s.filename}):s.height&&s.width&&((N=s.content_type)!=null&&N.startsWith("video/"))?(0,n.segment)("video",{url:s.url,proxy_url:s.proxy_url,file:s.filename}):(a=s.content_type)!=null&&a.startsWith("audio/")?(0,n.segment)("record",{url:s.url,proxy_url:s.proxy_url,file:s.filename}):(0,n.segment)("file",{url:s.url,proxy_url:s.proxy_url,file:s.filename})}).join(""));for(let s of _.embeds)s.image&&(e.content+=(0,n.segment)("image",{url:s.image.url,proxy_url:s.image.proxy_url})),s.thumbnail&&(e.content+=(0,n.segment)("image",{url:s.thumbnail.url,proxy_url:s.thumbnail.proxy_url})),s.video&&(e.content+=(0,n.segment)("video",{url:s.video.url,proxy_url:s.video.proxy_url}));if(e.elements=n.segment.parse(e.content),_.message_reference){let{message_id:s,channel_id:d}=_.message_reference;e.quote=await E.getMessage(d,s)}return e}I(C,"adaptMessage");function W(E,_){E.guildId=_.guild_id,E.subtype=_.guild_id?"group":"private",E.channelId=_.channel_id}I(W,"prepareMessage");function H(E,_){if(E.userId=_.user_id,E.messageId=_.message_id,E.guildId=_.guild_id,E.channelId=_.channel_id,E.subtype=_.guild_id?"group":"private",!_.emoji)return;let{id:e,name:t}=_.emoji;E.content=e?`${t}:${e}`:t}I(H,"prepareReactionSession");async function F(E,_){let e=E.session();if(_.t==="MESSAGE_CREATE")e.type="message",await C(E,_.d,e);else if(_.t==="MESSAGE_UPDATE"){e.type="message-updated";let t=await E.internal.getChannelMessage(_.d.channel_id,_.d.id);await C(E,t,e)}else if(_.t==="MESSAGE_DELETE")e.type="message-deleted",e.messageId=_.d.id,W(e,_.d);else if(_.t==="MESSAGE_REACTION_ADD")e.type="reaction-added",H(e,_.d);else if(_.t==="MESSAGE_REACTION_REMOVE")e.type="reaction-deleted",e.subtype="one",H(e,_.d);else if(_.t==="MESSAGE_REACTION_REMOVE_ALL")e.type="reaction-deleted",e.subtype="all",H(e,_.d);else if(_.t==="MESSAGE_REACTION_REMOVE_EMOJI")e.type="reaction-deleted",e.subtype="emoji",H(e,_.d);else if(_.t==="CHANNEL_UPDATE")e.type="channel-updated",e.guildId=_.d.guild_id,e.subtype=_.d.guild_id?"group":"private",e.channelId=_.d.id;else return;return e}I(F,"adaptSession");var o=(M(),f(l)),pE=zE(tE()),L=class extends o.Messenger{constructor(){super(...arguments),this.buffer="",this.addition={},this.figure=null,this.mode="default"}async post(E,_){try{let e=await this.bot.http.post(`/channels/${this.channelId}/messages`,E,{headers:_}),t=this.bot.session();await C(this.bot,e,t),t.app.emit(t,"send",t),this.results.push(t)}catch(e){this.errors.push(e)}}async sendEmbed(E,_){let{filename:e,data:t,mime:i}=await this.bot.ctx.http.file(E.url),A=new pE.default,S=new Blob([t],{type:i});return A.append("file",S,E.file||e),A.append("payload_json",JSON.stringify(_)),this.post(A,A.getHeaders())}async sendContent(E,_){return this.post({..._,content:E})}async sendAsset(E,_,e){let{handleMixedContent:t,handleExternalAsset:i}=this.bot.config;t==="separate"&&e.content&&(await this.post(e),e.content="");let A=I(async()=>(e.content&&await this.post(e),this.post({...e,content:_.url})),"sendDirect"),S=I(()=>this.sendEmbed(_,e),"sendDownload");if(["file:","data:","base64:"].some(d=>_.url.startsWith(d)))return await S();let s=_.mode||i;return s==="download"||t==="attach"&&e.content||E==="file"?S():s==="direct"?A():await this.bot.ctx.http.head(_.url,{headers:{accept:E+"/*"}}).then(d=>d["content-type"].startsWith(E)?A():S(),S)}async flush(){let E=this.buffer.trim();E&&(await this.post({...this.addition,content:E}),this.buffer="",this.addition={})}async visit(E){let{type:_,attrs:e,children:t}=E;if(_==="text")this.buffer+=e.content.replace(/[\\*_`~|()]/g,"\\$&");else if(_==="b"||_==="strong")this.buffer+="**",await this.render(t),this.buffer+="**";else if(_==="i"||_==="em")this.buffer+="*",await this.render(t),this.buffer+="*";else if(_==="u"||_==="ins")this.buffer+="__",await this.render(t),this.buffer+="__";else if(_==="s"||_==="del")this.buffer+="~~",await this.render(t),this.buffer+="~~";else if(_==="spl")this.buffer+="||",await this.render(t),this.buffer+="||";else if(_==="code")this.buffer+="`",await this.render(t),this.buffer+="`";else if(_==="a")await this.render(t),this.options.linkPreview?this.buffer+=` (${e.href}) `:this.buffer+=` (<${e.href}>) `;else if(_==="p")await this.render(t),this.buffer+=`
`;else if(_==="at")e.id?this.buffer+=`<@${e.id}>`:e.type==="all"?this.buffer+="@everyone":e.type==="here"&&(this.buffer+="@here");else if(_==="sharp"&&e.id)this.buffer+=`<#${e.id}>`;else if(_==="face"){if(e.platform&&e.platform!==this.bot.platform)return this.render(t);this.buffer+=`<${e.animated?"a":""}:${e.name}:${e.id}>`}else(_==="image"||_==="video")&&e.url?this.mode==="figure"?this.figure=E:(await this.sendAsset(_,e,{...this.addition,content:this.buffer.trim()}),this.buffer=""):_==="share"?(await this.flush(),await this.post({...this.addition,embeds:[{...e}]})):_==="record"?(await this.sendAsset("file",e,{...this.addition,content:this.buffer.trim()}),this.buffer=""):_==="figure"?(await this.flush(),this.mode="figure",await this.render(t),await this.sendAsset(this.figure.type,this.figure.attrs,{...this.addition,content:this.buffer.trim()}),this.buffer="",this.mode="default"):_==="quote"?(await this.flush(),this.addition.message_reference={message_id:e.id}):_==="message"?this.mode==="figure"?(await this.render(t),this.buffer+=`
`):(await this.flush(),await this.render(t),await this.flush()):await this.render(t)}};I(L,"DiscordMessenger");(E=>{E.Config=o.Schema.object({handleExternalAsset:o.Schema.union([o.Schema.const("download").description("先下载后发送"),o.Schema.const("direct").description("直接发送链接"),o.Schema.const("auto").description("发送一个 HEAD 请求，根据返回的 Content-Type 决定发送方式")]).role("radio").description("发送外链资源时采用的方式。").default("auto"),handleMixedContent:o.Schema.union([o.Schema.const("separate").description("将每个不同形式的内容分开发送"),o.Schema.const("attach").description("图片前如果有文本内容，则将文本作为图片的附带信息进行发送"),o.Schema.const("auto").description("如果图片本身采用直接发送则与前面的文本分开，否则将文本作为图片的附带信息发送")]).role("radio").description("发送图文等混合内容时采用的方式。").default("auto")}).description("发送设置")})(L||(L={}));var NE={};dE(NE,{ActivityFlag:()=>gE,ActivityType:()=>GE,AllowedMentionType:()=>TE,ApplicationCommand:()=>Q,ApplicationFlag:()=>RE,ApplicationRoleConnection:()=>w,AuditLog:()=>K,AutoModerationAction:()=>x,AutoModerationRule:()=>j,ButtonStyles:()=>oE,Channel:()=>J,ComponentType:()=>lE,DeviceType:()=>OE,GatewayIntent:()=>y,GatewayOpcode:()=>CE,Guild:()=>$,GuildFeature:()=>uE,GuildScheduledEvent:()=>z,IntegrationExpireBehavior:()=>ME,InteractionCallbackType:()=>cE,InteractionType:()=>hE,Internal:()=>r,Invite:()=>X,MembershipState:()=>PE,Message:()=>q,OverwriteType:()=>aE,Permission:()=>fE,PremiumType:()=>HE,StatusType:()=>UE,Sticker:()=>Z,SystemChannelFlag:()=>LE,TextInputStyles:()=>DE,UserFlag:()=>mE,VisibilityType:()=>bE,Webhook:()=>p});var FE=(M(),f(l)),r=class{constructor(E){this.http=E}static define(E){for(let _ in E)for(let e in E[_]){let t=e;for(let i of(0,FE.makeArray)(E[_][t]))r.prototype[i]=function(...A){let S=A.join(", "),s=_.replace(/\{([^}]+)\}/g,()=>{if(!A.length)throw new Error(`too few arguments for ${_}, received ${S}`);return A.shift()}),d={};if(A.length===1)t==="GET"||t==="DELETE"?d.params=A[0]:d.data=A[0];else if(A.length===2&&t!=="GET"&&t!=="DELETE")d.data=A[0],d.params=A[1];else if(A.length>1)throw new Error(`too many arguments for ${_}, received ${S}`);return this.http(t,s,d)}}}};I(r,"Internal");var RE=(E=>(E[E.GATEWAY_PRESENCE=4096]="GATEWAY_PRESENCE",E[E.GATEWAY_PRESENCE_LIMITED=8192]="GATEWAY_PRESENCE_LIMITED",E[E.GATEWAY_GUILD_MEMBERS=16384]="GATEWAY_GUILD_MEMBERS",E[E.GATEWAY_GUILD_MEMBERS_LIMITED=32768]="GATEWAY_GUILD_MEMBERS_LIMITED",E[E.VERIFICATION_PENDING_GUILD_LIMIT=65536]="VERIFICATION_PENDING_GUILD_LIMIT",E[E.EMBEDDED=131072]="EMBEDDED",E[E.GATEWAY_MESSAGE_CONTENT=262144]="GATEWAY_MESSAGE_CONTENT",E[E.GATEWAY_MESSAGE_CONTENT_LIMITED=524288]="GATEWAY_MESSAGE_CONTENT_LIMITED",E[E.APPLICATION_COMMAND_BADGE=8388608]="APPLICATION_COMMAND_BADGE",E))(RE||{});r.define({"/oauth2/applications/@me":{GET:"getCurrentBotApplicationInformation"},"/oauth2/@me":{GET:"getCurrentAuthorizationInformation"}});var w;(E=>{let _;(e=>{e[e.INTEGER_LESS_THAN_OR_EQUAL=1]="INTEGER_LESS_THAN_OR_EQUAL",e[e.INTEGER_GREATER_THAN_OR_EQUAL=2]="INTEGER_GREATER_THAN_OR_EQUAL",e[e.INTEGER_EQUAL=3]="INTEGER_EQUAL",e[e.INTEGER_NOT_EQUAL=4]="INTEGER_NOT_EQUAL",e[e.DATETIME_LESS_THAN_OR_EQUAL=5]="DATETIME_LESS_THAN_OR_EQUAL",e[e.DATETIME_GREATER_THAN_OR_EQUAL=6]="DATETIME_GREATER_THAN_OR_EQUAL",e[e.BOOLEAN_EQUAL=7]="BOOLEAN_EQUAL",e[e.BOOLEAN_NOT_EQUAL=8]="BOOLEAN_NOT_EQUAL"})(_=E.MetadataType||(E.MetadataType={}))})(w||(w={}));r.define({"/applications/{application.id}/role-connections/metadata":{GET:"getApplicationRoleConnectionMetadataRecords",PUT:"updateApplicationRoleConnectionMetadataRecords"}});var K;(E=>{let _;(e=>{e[e.GUILD_UPDATE=1]="GUILD_UPDATE",e[e.CHANNEL_CREATE=10]="CHANNEL_CREATE",e[e.CHANNEL_UPDATE=11]="CHANNEL_UPDATE",e[e.CHANNEL_DELETE=12]="CHANNEL_DELETE",e[e.CHANNEL_OVERWRITE_CREATE=13]="CHANNEL_OVERWRITE_CREATE",e[e.CHANNEL_OVERWRITE_UPDATE=14]="CHANNEL_OVERWRITE_UPDATE",e[e.CHANNEL_OVERWRITE_DELETE=15]="CHANNEL_OVERWRITE_DELETE",e[e.MEMBER_KICK=20]="MEMBER_KICK",e[e.MEMBER_PRUNE=21]="MEMBER_PRUNE",e[e.MEMBER_BAN_ADD=22]="MEMBER_BAN_ADD",e[e.MEMBER_BAN_REMOVE=23]="MEMBER_BAN_REMOVE",e[e.MEMBER_UPDATE=24]="MEMBER_UPDATE",e[e.MEMBER_ROLE_UPDATE=25]="MEMBER_ROLE_UPDATE",e[e.MEMBER_MOVE=26]="MEMBER_MOVE",e[e.MEMBER_DISCONNECT=27]="MEMBER_DISCONNECT",e[e.BOT_ADD=28]="BOT_ADD",e[e.ROLE_CREATE=30]="ROLE_CREATE",e[e.ROLE_UPDATE=31]="ROLE_UPDATE",e[e.ROLE_DELETE=32]="ROLE_DELETE",e[e.INVITE_CREATE=40]="INVITE_CREATE",e[e.INVITE_UPDATE=41]="INVITE_UPDATE",e[e.INVITE_DELETE=42]="INVITE_DELETE",e[e.WEBHOOK_CREATE=50]="WEBHOOK_CREATE",e[e.WEBHOOK_UPDATE=51]="WEBHOOK_UPDATE",e[e.WEBHOOK_DELETE=52]="WEBHOOK_DELETE",e[e.EMOJI_CREATE=60]="EMOJI_CREATE",e[e.EMOJI_UPDATE=61]="EMOJI_UPDATE",e[e.EMOJI_DELETE=62]="EMOJI_DELETE",e[e.MESSAGE_DELETE=72]="MESSAGE_DELETE",e[e.MESSAGE_BULK_DELETE=73]="MESSAGE_BULK_DELETE",e[e.MESSAGE_PIN=74]="MESSAGE_PIN",e[e.MESSAGE_UNPIN=75]="MESSAGE_UNPIN",e[e.INTEGRATION_CREATE=80]="INTEGRATION_CREATE",e[e.INTEGRATION_UPDATE=81]="INTEGRATION_UPDATE",e[e.INTEGRATION_DELETE=82]="INTEGRATION_DELETE",e[e.STAGE_INSTANCE_CREATE=83]="STAGE_INSTANCE_CREATE",e[e.STAGE_INSTANCE_UPDATE=84]="STAGE_INSTANCE_UPDATE",e[e.STAGE_INSTANCE_DELETE=85]="STAGE_INSTANCE_DELETE",e[e.STICKER_CREATE=90]="STICKER_CREATE",e[e.STICKER_UPDATE=91]="STICKER_UPDATE",e[e.STICKER_DELETE=92]="STICKER_DELETE",e[e.GUILD_SCHEDULED_EVENT_CREATE=100]="GUILD_SCHEDULED_EVENT_CREATE",e[e.GUILD_SCHEDULED_EVENT_UPDATE=101]="GUILD_SCHEDULED_EVENT_UPDATE",e[e.GUILD_SCHEDULED_EVENT_DELETE=102]="GUILD_SCHEDULED_EVENT_DELETE",e[e.THREAD_CREATE=110]="THREAD_CREATE",e[e.THREAD_UPDATE=111]="THREAD_UPDATE",e[e.THREAD_DELETE=112]="THREAD_DELETE",e[e.APPLICATION_COMMAND_PERMISSION_UPDATE=121]="APPLICATION_COMMAND_PERMISSION_UPDATE",e[e.AUTO_MODERATION_RULE_CREATE=140]="AUTO_MODERATION_RULE_CREATE",e[e.AUTO_MODERATION_RULE_UPDATE=141]="AUTO_MODERATION_RULE_UPDATE",e[e.AUTO_MODERATION_RULE_DELETE=142]="AUTO_MODERATION_RULE_DELETE",e[e.AUTO_MODERATION_BLOCK_MESSAGE=143]="AUTO_MODERATION_BLOCK_MESSAGE",e[e.AUTO_MODERATION_FLAG_TO_CHANNEL=144]="AUTO_MODERATION_FLAG_TO_CHANNEL",e[e.AUTO_MODERATION_USER_COMMUNICATION_DISABLED=145]="AUTO_MODERATION_USER_COMMUNICATION_DISABLED"})(_=E.Type||(E.Type={}))})(K||(K={}));r.define({"/guilds/{guild.id}/audit-logs":{GET:"getGuildAuditLog"}});var j;(E=>{let _;(i=>{i[i.MESSAGE_SEND=1]="MESSAGE_SEND"})(_=E.EventType||(E.EventType={}));let e;(i=>{i[i.KEYWORD=1]="KEYWORD",i[i.SPAM=3]="SPAM",i[i.KEYWORD_PRESET=4]="KEYWORD_PRESET",i[i.MENTION_SPAM=5]="MENTION_SPAM"})(e=E.TriggerType||(E.TriggerType={}));let t;(i=>{i[i.PROFANITY=1]="PROFANITY",i[i.SEXUAL_CONTEN=2]="SEXUAL_CONTEN",i[i.SLURS=3]="SLURS"})(t=E.KeywordPresetType||(E.KeywordPresetType={}))})(j||(j={}));var x;(E=>{let _;(e=>{e[e.BLOCK_MESSAGE=1]="BLOCK_MESSAGE",e[e.SEND_ALERT_MESSAGE=2]="SEND_ALERT_MESSAGE",e[e.TIMEOUT=3]="TIMEOUT"})(_=E.Type||(E.Type={}))})(x||(x={}));r.define({"/guilds/{guild.id}/auto-moderation/rules":{GET:"listAutoModerationRules",POST:"createAutoModerationRule"},"/guilds/{guild.id}/auto-moderation/rules/{rule.id}":{GET:"getAutoModerationRule",PATCH:"modifyAutoModerationRule",DELETE:"deleteAutoModerationRule"}});r.define({"/guilds/{guild.id}/bans":{GET:"getGuildBans"},"/guilds/{guild.id}/bans/{user.id}":{GET:"getGuildBan",PUT:"createGuildBan",DELETE:"removeGuildBan"}});var J;(E=>{let _;(e=>{e[e.GUILD_TEXT=0]="GUILD_TEXT",e[e.DM=1]="DM",e[e.GUILD_VOICE=2]="GUILD_VOICE",e[e.GROUP_DM=3]="GROUP_DM",e[e.GUILD_CATEGORY=4]="GUILD_CATEGORY",e[e.GUILD_NEWS=5]="GUILD_NEWS",e[e.GUILD_STORE=6]="GUILD_STORE",e[e.GUILD_NEWS_THREAD=10]="GUILD_NEWS_THREAD",e[e.GUILD_PUBLIC_THREAD=11]="GUILD_PUBLIC_THREAD",e[e.GUILD_PRIVATE_THREAD=12]="GUILD_PRIVATE_THREAD",e[e.GUILD_STAGE_VOICE=13]="GUILD_STAGE_VOICE",e[e.GUILD_DIRECTORY=14]="GUILD_DIRECTORY",e[e.GUILD_FORUM=15]="GUILD_FORUM"})(_=E.Type||(E.Type={}))})(J||(J={}));var aE=(E=>(E[E.ROLE=0]="ROLE",E[E.MEMBER=1]="MEMBER",E))(aE||{}),TE=(E=>(E.ROLE_MENTIONS="roles",E.USER_MENTIONS="users",E.EVERYONE_MENTIONS="everyone",E))(TE||{});r.define({"/users/@me/channels":{POST:["createDM","createGroupDM"]}});r.define({"/guilds/{guild.id}/channels":{GET:"getGuildChannels",POST:"createGuildChannel",PATCH:"modifyGuildChannelPositions"}});r.define({"/channels/{channel.id}":{GET:"getChannel",PATCH:"modifyChannel",DELETE:"deleteChannel"},"/channels/{channel.id}/permissions/{overwrite.id}":{PUT:"editChannelPermissions",DELETE:"deleteChannelPermission"},"/channels/{channel.id}/followers":{POST:"followNewsChannel"},"/channels/{channel.id}/typing":{POST:"triggerTypingIndicator"},"/channels/{channel.id}/recipients/{user.id}":{PUT:"groupDMAddRecipient",DELETE:"groupDMRemoveRecipient"}});var Q;(E=>{let _;(i=>{i[i.CHAT_INPUT=1]="CHAT_INPUT",i[i.USER=2]="USER",i[i.MESSAGE=3]="MESSAGE"})(_=E.Type||(E.Type={}));let e;(i=>{i[i.SUB_COMMAND=1]="SUB_COMMAND",i[i.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",i[i.STRING=3]="STRING",i[i.INTEGER=4]="INTEGER",i[i.BOOLEAN=5]="BOOLEAN",i[i.USER=6]="USER",i[i.CHANNEL=7]="CHANNEL",i[i.ROLE=8]="ROLE",i[i.MENTIONABLE=9]="MENTIONABLE",i[i.NUMBER=10]="NUMBER",i[i.ATTACHMENT=11]="ATTACHMENT"})(e=E.OptionType||(E.OptionType={}));let t;(i=>{i[i.ROLE=1]="ROLE",i[i.USER=2]="USER",i[i.CHANNEL=3]="CHANNEL"})(t=E.PermissionType||(E.PermissionType={}))})(Q||(Q={}));r.define({"/applications/{application.id}/commands":{GET:"getGlobalApplicationCommands",POST:"createGlobalApplicationCommand",PUT:"bulkOverwriteGlobalApplicationCommands"},"/applications/{application.id}/commands/{command.id}":{GET:"getGlobalApplicationCommand",PATCH:"editGlobalApplicationCommand",DELETE:"deleteGlobalApplicationCommand"},"/applications/{application.id}/guilds/{guild.id}/commands":{GET:"getGuildApplicationCommands",POST:"createGuildApplicationCommand",PUT:"bulkOverwriteGuildApplicationCommands"},"/applications/{application.id}/guilds/{guild.id}/commands/{command.id}":{GET:"getGuildApplicationCommand",PATCH:"editGuildApplicationCommand",DELETE:"deleteGuildApplicationCommand"},"/applications/{application.id}/guilds/{guild.id}/commands/permissions":{GET:"getGuildApplicationCommandPermissions"},"/applications/{application.id}/guilds/{guild.id}/commands/{command.id}/permissions":{GET:"getApplicationCommandPermissions",PUT:"editApplicationCommandPermissions"}});var lE=(E=>(E[E.ACTION_ROW=1]="ACTION_ROW",E[E.BUTTON=2]="BUTTON",E[E.SELECT_MENU=3]="SELECT_MENU",E[E.TEXT_INPUT=4]="TEXT_INPUT",E[E.USER_SELECT=5]="USER_SELECT",E[E.ROLE_SELECT=6]="ROLE_SELECT",E[E.MENTIONABLE_SELECT=7]="MENTIONABLE_SELECT",E[E.CHANNEL_SELECT=8]="CHANNEL_SELECT",E))(lE||{}),oE=(E=>(E[E.PRIMARY=1]="PRIMARY",E[E.SECONDARY=2]="SECONDARY",E[E.SUCCESS=3]="SUCCESS",E[E.DANGER=4]="DANGER",E[E.LINK=5]="LINK",E))(oE||{}),DE=(E=>(E[E.SHORT=1]="SHORT",E[E.PARAGRAPH=2]="PARAGRAPH",E))(DE||{}),OE=(E=>(E.AUDIO_INPUT="audioinput",E.AUDIO_OUTPUT="audiooutput",E.VIDEO_INPUT="videoinput",E))(OE||{});r.define({"/guilds/{guild.id}/emojis":{GET:"listGuildEmojis",POST:"createGuildEmoji"},"/guilds/{guild.id}/emojis/{emoji.id}":{GET:"getGuildEmoji",PATCH:"modifyGuildEmoji",DELETE:"deleteGuildEmoji"}});var CE=(E=>(E[E.DISPATCH=0]="DISPATCH",E[E.HEARTBEAT=1]="HEARTBEAT",E[E.IDENTIFY=2]="IDENTIFY",E[E.PRESENCE_UPDATE=3]="PRESENCE_UPDATE",E[E.VOICE_STATE_UPDATE=4]="VOICE_STATE_UPDATE",E[E.RESUME=6]="RESUME",E[E.RECONNECT=7]="RECONNECT",E[E.REQUEST_GUILD_MEMBERS=8]="REQUEST_GUILD_MEMBERS",E[E.INVALID_SESSION=9]="INVALID_SESSION",E[E.HELLO=10]="HELLO",E[E.HEARTBEAT_ACK=11]="HEARTBEAT_ACK",E))(CE||{}),y=(E=>(E[E.GUILDS=1]="GUILDS",E[E.GUILD_MEMBERS=2]="GUILD_MEMBERS",E[E.GUILD_BANS=4]="GUILD_BANS",E[E.GUILD_EMOJIS_AND_STICKERS=8]="GUILD_EMOJIS_AND_STICKERS",E[E.GUILD_INTEGRATIONS=16]="GUILD_INTEGRATIONS",E[E.GUILD_WEBHOOKS=32]="GUILD_WEBHOOKS",E[E.GUILD_INVITES=64]="GUILD_INVITES",E[E.GUILD_VOICE_STATES=128]="GUILD_VOICE_STATES",E[E.GUILD_PRESENCES=256]="GUILD_PRESENCES",E[E.GUILD_MESSAGES=512]="GUILD_MESSAGES",E[E.GUILD_MESSAGE_REACTIONS=1024]="GUILD_MESSAGE_REACTIONS",E[E.GUILD_MESSAGE_TYPING=2048]="GUILD_MESSAGE_TYPING",E[E.DIRECT_MESSAGES=4096]="DIRECT_MESSAGES",E[E.DIRECT_MESSAGE_REACTIONS=8192]="DIRECT_MESSAGE_REACTIONS",E[E.DIRECT_MESSAGE_TYPING=16384]="DIRECT_MESSAGE_TYPING",E[E.MESSAGE_CONTENT=32768]="MESSAGE_CONTENT",E[E.GUILD_SCHEDULED_EVENTS=65536]="GUILD_SCHEDULED_EVENTS",E[E.AUTO_MODERATION_CONFIGURATION=1048576]="AUTO_MODERATION_CONFIGURATION",E[E.AUTO_MODERATION_EXECUTION=2097152]="AUTO_MODERATION_EXECUTION",E))(y||{});r.define({"/gateway":{GET:"getGateway"},"/gateway/bot":{GET:"getGatewayBot"}});r.define({"/guilds/{guild.id}/members/{user.id}":{GET:"getGuildMember",PUT:"addGuildMember",PATCH:"modifyGuildMember",DELETE:"removeGuildMember"},"/guilds/{guild.id}/members":{GET:"listGuildMembers"},"/guilds/{guild.id}/members/search":{GET:"searchGuildMembers"},"/guilds/{guild.id}/members/@me":{PATCH:"modifyCurrentMember"},"/guilds/{guild.id}/members/{user.id}/roles/{role.id}":{PUT:"addGuildMemberRole",DELETE:"removeGuildMemberRole"},"/guilds/{guild.id}/prune":{GET:"getGuildPruneCount",POST:"beginGuildPrune"}});r.define({"/guilds/templates/{template.code}":{GET:"getGuildTemplate",POST:"createGuildfromGuildTemplate"},"/guilds/{guild.id}/templates":{GET:"getGuildTemplates",POST:"createGuildTemplate"},"/guilds/{guild.id}/templates/{template.code}":{PUT:"syncGuildTemplate",PATCH:"modifyGuildTemplate",DELETE:"deleteGuildTemplate"}});var $;(E=>{let _;(e=>{let t;(i=>{i.shield="shield",i.banner1="banner1",i.banner2="banner2",i.banner3="banner3",i.banner4="banner4"})(t=e.WidgetStyleOptions||(e.WidgetStyleOptions={}))})(_=E.Params||(E.Params={}))})($||($={}));var LE=(E=>(E[E.SUPPRESS_JOIN_NOTIFICATIONS=1]="SUPPRESS_JOIN_NOTIFICATIONS",E[E.SUPPRESS_PREMIUM_SUBSCRIPTIONS=2]="SUPPRESS_PREMIUM_SUBSCRIPTIONS",E[E.SUPPRESS_GUILD_REMINDER_NOTIFICATIONS=4]="SUPPRESS_GUILD_REMINDER_NOTIFICATIONS",E[E.SUPPRESS_JOIN_NOTIFICATION_REPLIES=8]="SUPPRESS_JOIN_NOTIFICATION_REPLIES",E[E.SUPPRESS_ROLE_SUBSCRIPTION_PURCHASE_NOTIFICATIONS=16]="SUPPRESS_ROLE_SUBSCRIPTION_PURCHASE_NOTIFICATIONS",E[E.SUPPRESS_ROLE_SUBSCRIPTION_PURCHASE_NOTIFICATION_REPLIES=32]="SUPPRESS_ROLE_SUBSCRIPTION_PURCHASE_NOTIFICATION_REPLIES",E))(LE||{}),uE=(E=>(E.ANIMATED_ICON="ANIMATED_ICON",E.BANNER="BANNER",E.COMMERCE="COMMERCE",E.COMMUNITY="COMMUNITY",E.DISCOVERABLE="DISCOVERABLE",E.FEATURABLE="FEATURABLE",E.INVITE_SPLASH="INVITE_SPLASH",E.MEMBER_VERIFICATION_GATE_ENABLED="MEMBER_VERIFICATION_GATE_ENABLED",E.MONETIZATION_ENABLED="MONETIZATION_ENABLED",E.MORE_STICKERS="MORE_STICKERS",E.NEWS="NEWS",E.PARTNERED="PARTNERED",E.PREVIEW_ENABLED="PREVIEW_ENABLED",E.PRIVATE_THREADS="PRIVATE_THREADS",E.ROLE_ICONS="ROLE_ICONS",E.SEVEN_DAY_THREAD_ARCHIVE="SEVEN_DAY_THREAD_ARCHIVE",E.THREE_DAY_THREAD_ARCHIVE="THREE_DAY_THREAD_ARCHIVE",E.TICKETED_EVENTS_ENABLED="TICKETED_EVENTS_ENABLED",E.VANITY_URL="VANITY_URL",E.VERIFIED="VERIFIED",E.VIP_REGIONS="VIP_REGIONS",E.WELCOME_SCREEN_ENABLED="WELCOME_SCREEN_ENABLED",E))(uE||{});r.define({"/users/@me/guilds":{GET:"getCurrentUserGuilds"},"/users/@me/guilds/{guild.id}/member":{GET:"getCurrentUserGuildMember"},"/users/@me/guilds/{guild.id}":{DELETE:"leaveGuild"}});r.define({"/guilds":{POST:"createGuild"},"/guilds/{guild.id}":{GET:"getGuild",PATCH:"modifyGuild",DELETE:"deleteGuild"},"/guilds/{guild.id}/preview":{GET:"getGuildPreview"},"/guilds/{guild.id}/widget":{GET:"getGuildWidgetSettings",PATCH:"modifyGuildWidget"},"/guilds/{guild.id}/widget.json":{GET:"getGuildWidget"},"/guilds/{guild.id}/widget.png":{GET:"getGuildWidgetImage"},"/guilds/{guild.id}/welcome-screen":{GET:"getGuildWelcomeScreen",PATCH:"modifyGuildWelcomeScreen"}});var ME=(E=>(E[E.REMOVE_ROLE=0]="REMOVE_ROLE",E[E.KICK=1]="KICK",E))(ME||{});r.define({"/guilds/{guild.id}/integrations":{GET:"getGuildIntegrations"},"/guilds/{guild.id}/integrations/{integration.id}":{DELETE:"deleteGuildIntegration"}});var hE=(E=>(E[E.PING=1]="PING",E[E.APPLICATION_COMMAND=2]="APPLICATION_COMMAND",E[E.MESSAGE_COMPONENT=3]="MESSAGE_COMPONENT",E[E.APPLICATION_COMMAND_AUTOCOMPLETE=4]="APPLICATION_COMMAND_AUTOCOMPLETE",E[E.MODAL_SUBMIT=5]="MODAL_SUBMIT",E))(hE||{}),cE=(E=>(E[E.PONG=1]="PONG",E[E.CHANNEL_MESSAGE_WITH_SOURCE=4]="CHANNEL_MESSAGE_WITH_SOURCE",E[E.DEFERRED_CHANNEL_MESSAGE_WITH_SOURCE=5]="DEFERRED_CHANNEL_MESSAGE_WITH_SOURCE",E[E.DEFERRED_UPDATE_MESSAGE=6]="DEFERRED_UPDATE_MESSAGE",E[E.UPDATE_MESSAGE=7]="UPDATE_MESSAGE",E[E.APPLICATION_COMMAND_AUTOCOMPLETE_RESULT=8]="APPLICATION_COMMAND_AUTOCOMPLETE_RESULT",E[E.MODAL=9]="MODAL",E))(cE||{});r.define({"/interactions/{interaction.id}/{interaction.token}/callback":{POST:"createInteractionResponse"},"/webhooks/{application.id}/{interaction.token}/messages/@original":{GET:"getOriginalInteractionResponse",PATCH:"editOriginalInteractionResponse",DELETE:"deleteOriginalInteractionResponse"},"/webhooks/{application.id}/{interaction.token}":{POST:"createFollowupMessage"},"/webhooks/{application.id}/{interaction.token}/messages/{message.id}":{GET:"getFollowupMessage",PATCH:"editFollowupMessage",DELETE:"deleteFollowupMessage"}});var X;(E=>{let _;(e=>{e[e.STREAM=1]="STREAM",e[e.EMBEDDED_APPLICATION=2]="EMBEDDED_APPLICATION"})(_=E.TargetType||(E.TargetType={}))})(X||(X={}));r.define({"/invites/{invite.code}":{GET:"getInvite",DELETE:"deleteInvite"},"/guilds/{guild.id}/invites":{GET:"getGuildInvites"},"/guilds/{guild.id}/vanity-url":{GET:"getGuildVanityURL"},"/channels/{channel.id}/invites":{GET:"getChannelInvites",POST:"createChannelInvite"}});var q;(E=>{let _;(i=>{i[i.DEFAULT=0]="DEFAULT",i[i.RECIPIENT_ADD=1]="RECIPIENT_ADD",i[i.RECIPIENT_REMOVE=2]="RECIPIENT_REMOVE",i[i.CALL=3]="CALL",i[i.CHANNEL_NAME_CHANGE=4]="CHANNEL_NAME_CHANGE",i[i.CHANNEL_ICON_CHANGE=5]="CHANNEL_ICON_CHANGE",i[i.CHANNEL_PINNED_MESSAGE=6]="CHANNEL_PINNED_MESSAGE",i[i.GUILD_MEMBER_JOIN=7]="GUILD_MEMBER_JOIN",i[i.USER_PREMIUM_GUILD_SUBSCRIPTION=8]="USER_PREMIUM_GUILD_SUBSCRIPTION",i[i.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1=9]="USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1",i[i.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2=10]="USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2",i[i.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3=11]="USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3",i[i.CHANNEL_FOLLOW_ADD=12]="CHANNEL_FOLLOW_ADD",i[i.GUILD_DISCOVERY_DISQUALIFIED=14]="GUILD_DISCOVERY_DISQUALIFIED",i[i.GUILD_DISCOVERY_REQUALIFIED=15]="GUILD_DISCOVERY_REQUALIFIED",i[i.GUILD_DISCOVERY_GRACE_PERIOD_INITIAL_WARNING=16]="GUILD_DISCOVERY_GRACE_PERIOD_INITIAL_WARNING",i[i.GUILD_DISCOVERY_GRACE_PERIOD_FINAL_WARNING=17]="GUILD_DISCOVERY_GRACE_PERIOD_FINAL_WARNING",i[i.THREAD_CREATED=18]="THREAD_CREATED",i[i.REPLY=19]="REPLY",i[i.CHAT_INPUT_COMMAND=20]="CHAT_INPUT_COMMAND",i[i.THREAD_STARTER_MESSAGE=21]="THREAD_STARTER_MESSAGE",i[i.GUILD_INVITE_REMINDER=22]="GUILD_INVITE_REMINDER",i[i.CONTEXT_MENU_COMMAND=23]="CONTEXT_MENU_COMMAND",i[i.AUTO_MODERATION_ACTION=24]="AUTO_MODERATION_ACTION",i[i.ROLE_SUBSCRIPTION_PURCHASE=25]="ROLE_SUBSCRIPTION_PURCHASE",i[i.INTERACTION_PREMIUM_UPSELL=26]="INTERACTION_PREMIUM_UPSELL",i[i.GUILD_APPLICATION_PREMIUM_SUBSCRIPTION=32]="GUILD_APPLICATION_PREMIUM_SUBSCRIPTION"})(_=E.Type||(E.Type={}));let e;(i=>{i[i.JOIN=1]="JOIN",i[i.SPECTATE=2]="SPECTATE",i[i.LISTEN=3]="LISTEN",i[i.JOIN_REQUEST=5]="JOIN_REQUEST"})(e=E.ActivityType||(E.ActivityType={}));let t;(i=>{i[i.CROSSPOSTED=1]="CROSSPOSTED",i[i.IS_CROSSPOST=2]="IS_CROSSPOST",i[i.SUPPRESS_EMBEDS=4]="SUPPRESS_EMBEDS",i[i.SOURCE_MESSAGE_DELETED=8]="SOURCE_MESSAGE_DELETED",i[i.URGENT=16]="URGENT",i[i.HAS_THREAD=32]="HAS_THREAD",i[i.EPHEMERAL=64]="EPHEMERAL",i[i.LOADING=128]="LOADING",i[i.FAILED_TO_MENTION_SOME_ROLES_IN_THREAD=256]="FAILED_TO_MENTION_SOME_ROLES_IN_THREAD"})(t=E.Flag||(E.Flag={}))})(q||(q={}));r.define({"/channels/{channel.id}/messages":{GET:"getChannelMessages",POST:"createMessage"},"/channels/{channel.id}/messages/{message.id}":{GET:"getChannelMessage",PATCH:"editMessage",DELETE:"deleteMessage"},"/channels/{channel.id}/messages/{message.id}/crosspost":{POST:"crosspostMessage"},"/channels/{channel.id}/messages/bulk-delete":{POST:"bulkDeleteMessages"},"/channels/{channel.id}/pins":{GET:"getPinnedMessages"},"/channels/{channel.id}/pins/{message.id}":{PUT:"pinMessage",DELETE:"unpinMessage"}});var UE=(E=>(E.ONLINE="ONLINE",E.DND="DND",E.IDLE="IDLE",E.OFFLINE="OFFLINE",E))(UE||{}),GE=(E=>(E[E.GAME=0]="GAME",E[E.STREAMING=1]="STREAMING",E[E.LISTENING=2]="LISTENING",E[E.WATCHING=3]="WATCHING",E[E.CUSTOM=4]="CUSTOM",E[E.COMPETING=5]="COMPETING",E))(GE||{}),gE=(E=>(E[E.INSTANCE=1]="INSTANCE",E[E.JOIN=2]="JOIN",E[E.SPECTATE=4]="SPECTATE",E[E.JOIN_REQUEST=8]="JOIN_REQUEST",E[E.SYNC=16]="SYNC",E[E.PLAY=32]="PLAY",E[E.PARTY_PRIVACY_FRIENDS=64]="PARTY_PRIVACY_FRIENDS",E[E.PARTY_PRIVACY_VOICE_CHANNEL=128]="PARTY_PRIVACY_VOICE_CHANNEL",E[E.EMBEDDED=256]="EMBEDDED",E))(gE||{});r.define({"/channels/{channel.id}/messages/{message.id}/reactions/{emoji}/@me":{PUT:"createReaction",DELETE:"deleteOwnReaction"},"/channels/{channel.id}/messages/{message.id}/reactions/{emoji}/{user.id}":{DELETE:"deleteUserReaction"},"/channels/{channel.id}/messages/{message.id}/reactions/{emoji}":{GET:"getReactions",DELETE:"deleteAllReactionsforEmoji"},"/channels/{channel.id}/messages/{message.id}/reactions":{DELETE:"deleteAllReactions"}});var fE=(E=>(E[E.CREATE_INSTANT_INVITE=1]="CREATE_INSTANT_INVITE",E[E.KICK_MEMBERS=2]="KICK_MEMBERS",E[E.BAN_MEMBERS=4]="BAN_MEMBERS",E[E.ADMINISTRATOR=8]="ADMINISTRATOR",E[E.MANAGE_CHANNELS=16]="MANAGE_CHANNELS",E[E.MANAGE_GUILD=32]="MANAGE_GUILD",E[E.ADD_REACTIONS=64]="ADD_REACTIONS",E[E.VIEW_AUDIT_LOG=128]="VIEW_AUDIT_LOG",E[E.PRIORITY_SPEAKER=256]="PRIORITY_SPEAKER",E[E.STREAM=512]="STREAM",E[E.VIEW_CHANNEL=1024]="VIEW_CHANNEL",E[E.SEND_MESSAGES=2048]="SEND_MESSAGES",E[E.SEND_TTS_MESSAGES=4096]="SEND_TTS_MESSAGES",E[E.MANAGE_MESSAGES=8192]="MANAGE_MESSAGES",E[E.EMBED_LINKS=16384]="EMBED_LINKS",E[E.ATTACH_FILES=32768]="ATTACH_FILES",E[E.READ_MESSAGE_HISTORY=65536]="READ_MESSAGE_HISTORY",E[E.MENTION_EVERYONE=131072]="MENTION_EVERYONE",E[E.USE_EXTERNAL_EMOJIS=262144]="USE_EXTERNAL_EMOJIS",E[E.VIEW_GUILD_INSIGHTS=524288]="VIEW_GUILD_INSIGHTS",E[E.CONNECT=1048576]="CONNECT",E[E.SPEAK=2097152]="SPEAK",E[E.MUTE_MEMBERS=4194304]="MUTE_MEMBERS",E[E.DEAFEN_MEMBERS=8388608]="DEAFEN_MEMBERS",E[E.MOVE_MEMBERS=16777216]="MOVE_MEMBERS",E[E.USE_VAD=33554432]="USE_VAD",E[E.CHANGE_NICKNAME=67108864]="CHANGE_NICKNAME",E[E.MANAGE_NICKNAMES=134217728]="MANAGE_NICKNAMES",E[E.MANAGE_ROLES=268435456]="MANAGE_ROLES",E[E.MANAGE_WEBHOOKS=536870912]="MANAGE_WEBHOOKS",E[E.MANAGE_EMOJIS_AND_STICKERS=1073741824]="MANAGE_EMOJIS_AND_STICKERS",E[E.USE_APPLICATION_COMMANDS=-2147483648]="USE_APPLICATION_COMMANDS",E[E.REQUEST_TO_SPEAK=1]="REQUEST_TO_SPEAK",E[E.MANAGE_THREADS=4]="MANAGE_THREADS",E[E.CREATE_PUBLIC_THREADS=8]="CREATE_PUBLIC_THREADS",E[E.CREATE_PRIVATE_THREADS=16]="CREATE_PRIVATE_THREADS",E[E.USE_EXTERNAL_STICKERS=32]="USE_EXTERNAL_STICKERS",E[E.SEND_MESSAGES_IN_THREADS=64]="SEND_MESSAGES_IN_THREADS",E[E.START_EMBEDDED_ACTIVITIES=128]="START_EMBEDDED_ACTIVITIES",E[E.MODERATE_MEMBERS=256]="MODERATE_MEMBERS",E))(fE||{});r.define({"/guilds/{guild.id}/roles":{GET:"getGuildRoles",POST:"createGuildRole",PATCH:"modifyGuildRolePositions"},"/guilds/{guild.id}/roles/{role.id}":{PATCH:"modifyGuildRole",DELETE:"deleteGuildRole"}});var z;(E=>{let _;(i=>{i[i.GUILD_ONLY=2]="GUILD_ONLY"})(_=E.PrivacyLevel||(E.PrivacyLevel={}));let e;(i=>{i[i.STAGE_INSTANCE=1]="STAGE_INSTANCE",i[i.VOICE=2]="VOICE",i[i.EXTERNAL=3]="EXTERNAL"})(e=E.EntityType||(E.EntityType={}));let t;(i=>{i[i.SCHEDULED=1]="SCHEDULED",i[i.ACTIVE=2]="ACTIVE",i[i.COMPLETED=3]="COMPLETED",i[i.CANCELLED=4]="CANCELLED"})(t=E.Status||(E.Status={}))})(z||(z={}));r.define({"/guilds/{guild.id}/scheduled-events":{GET:"listScheduledEventsforGuild",POST:"createGuildScheduledEvent"},"/guilds/{guild.id}/scheduled-events/{guild_scheduled_event.id}":{GET:"getGuildScheduledEvent",PATCH:"modifyGuildScheduledEvent",DELETE:"deleteGuildScheduledEvent"},"/guilds/{guild.id}/scheduled-events/{guild_scheduled_event.id}/users":{GET:"getGuildScheduledEventUsers"}});r.define({"/stage-instances":{POST:"createStageInstance"},"/stage-instances/{channel.id}":{GET:"getStageInstance",PATCH:"modifyStageInstance",DELETE:"deleteStageInstance"}});var Z;(E=>{let _;(t=>{t[t.STANDARD=1]="STANDARD",t[t.GUILD=2]="GUILD"})(_=E.Type||(E.Type={}));let e;(t=>{t[t.PNG=1]="PNG",t[t.APNG=2]="APNG",t[t.LOTTIE=3]="LOTTIE",t[t.GIF=4]="GIF"})(e=E.FormatType||(E.FormatType={}))})(Z||(Z={}));r.define({"/stickers/{sticker.id}":{GET:"getSticker"},"/sticker-packs":{GET:"listNitroStickerPacks"},"/guilds/{guild.id}/stickers":{GET:"listGuildStickers",POST:"createGuildSticker"},"/guilds/{guild.id}/stickers/{sticker.id}":{GET:"getGuildSticker",PATCH:"modifyGuildSticker",DELETE:"deleteGuildSticker"}});var PE=(E=>(E[E.INVITED=1]="INVITED",E[E.ACCEPTED=2]="ACCEPTED",E))(PE||{});r.define({"/channels/{channel.id}/messages/{message.id}/threads":{POST:"startThreadFromMessage"},"/channels/{channel.id}/threads":{POST:["startThreadWithoutMessage","startThreadInForumChannel"]},"/channels/{channel.id}/thread-members/@me":{PUT:"joinThread",DELETE:"leaveThread"},"/channels/{channel.id}/thread-members/{user.id}":{PUT:"addThreadMember",DELETE:"removeThreadMember",GET:"getThreadMember"},"/channels/{channel.id}/thread-members":{GET:"listThreadMembers"},"/channels/{channel.id}/threads/archived/public":{GET:"listPublicArchivedThreads"},"/channels/{channel.id}/threads/archived/private":{GET:"listPrivateArchivedThreads"},"/channels/{channel.id}/users/@me/threads/archived/private":{GET:"listJoinedPrivateArchivedThreads"}});var mE=(E=>(E[E.NONE=0]="NONE",E[E.DISCORD_EMPLOYEE=1]="DISCORD_EMPLOYEE",E[E.PARTNERED_SERVER_OWNER=2]="PARTNERED_SERVER_OWNER",E[E.HYPESQUAD_EVENTS=4]="HYPESQUAD_EVENTS",E[E.BUG_HUNTER_LEVEL_1=8]="BUG_HUNTER_LEVEL_1",E[E.HOUSE_BRAVERY=64]="HOUSE_BRAVERY",E[E.HOUSE_BRILLIANCE=128]="HOUSE_BRILLIANCE",E[E.HOUSE_BALANCE=256]="HOUSE_BALANCE",E[E.EARLY_SUPPORTER=512]="EARLY_SUPPORTER",E[E.TEAM_USER=1024]="TEAM_USER",E[E.BUG_HUNTER_LEVEL_2=16384]="BUG_HUNTER_LEVEL_2",E[E.VERIFIED_BOT=65536]="VERIFIED_BOT",E[E.EARLY_VERIFIED_BOT_DEVELOPER=131072]="EARLY_VERIFIED_BOT_DEVELOPER",E[E.DISCORD_CERTIFIED_MODERATOR=262144]="DISCORD_CERTIFIED_MODERATOR",E[E.BOT_HTTP_INTERACTIONS=524288]="BOT_HTTP_INTERACTIONS",E[E.ACTIVE_DEVELOPER=4194304]="ACTIVE_DEVELOPER",E))(mE||{}),HE=(E=>(E[E.NONE=0]="NONE",E[E.NITRO_CLASSIC=1]="NITRO_CLASSIC",E[E.NITRO=2]="NITRO",E[E.NITRO_BASIC=3]="NITRO_BASIC",E))(HE||{}),bE=(E=>(E[E.NONE=0]="NONE",E[E.EVERYONE=1]="EVERYONE",E))(bE||{});r.define({"/users/@me":{GET:"getCurrentUser",PATCH:"modifyCurrentUser"},"/users/{user.id}":{GET:"getUser"},"/users/@me/connections":{GET:"getUserConnections"}});r.define({"/voice/regions":{GET:"listVoiceRegions"},"/guilds/{guild.id}/regions":{GET:"getGuildVoiceRegions"},"/guilds/{guild.id}/voice-states/@me":{PATCH:"modifyCurrentUserVoiceState"},"/guilds/{guild.id}/voice-states/{user.id}":{PATCH:"modifyUserVoiceState"}});var p;(E=>{let _;(e=>{e[e.INCOMING=1]="INCOMING",e[e.CHANNEL_FOLLOWER=2]="CHANNEL_FOLLOWER",e[e.APPLICATION=3]="APPLICATION"})(_=E.Type||(E.Type={}))})(p||(p={}));r.define({"/channels/{channel.id}/webhooks":{POST:"createWebhook",GET:"getChannelWebhooks"},"/guilds/{guild.id}/webhooks":{GET:"getGuildWebhooks"},"/webhooks/{webhook.id}":{GET:"getWebhook",PATCH:"modifyWebhook",DELETE:"deleteWebhook"},"/webhooks/{webhook.id}/{webhook.token}":{GET:"getWebhookwithToken",PATCH:"modifyWebhookwithToken",DELETE:"deleteWebhookwithToken",POST:"executeWebhook"},"/webhooks/{webhook.id}/{webhook.token}/slack":{POST:"executeSlackCompatibleWebhook"},"/webhooks/{webhook.id}/{webhook.token}/github":{POST:"executeGitHubCompatibleWebhook"},"/webhooks/{webhook.id}/{webhook.token}/messages/{message.id}":{GET:"getWebhookMessage",PATCH:"editWebhookMessage",DELETE:"deleteWebhookMessage"}});var c=(M(),f(l)),D=new c.Logger("discord"),U=class extends c.Adapter.WsClient{constructor(){super(...arguments),this._d=0,this._sessionId=""}async prepare(){if(this._resumeUrl)return this.bot.http.ws(this._resumeUrl);let{url:E}=await this.bot.internal.getGatewayBot();return this.bot.http.ws(E)}heartbeat(){D.debug(`heartbeat d ${this._d}`),this.bot.socket.send(JSON.stringify({op:1,d:this._d}))}accept(){this.bot.socket.addEventListener("message",async({data:E})=>{var _,e;let t;try{t=JSON.parse(E.toString())}catch{return D.warn("cannot parse message",E)}if(D.debug(rE().inspect(t,!1,null,!0)),t.s&&(this._d=t.s),t.op===10&&(this._ping=setInterval(()=>this.heartbeat(),t.d.heartbeat_interval),this._sessionId?(D.debug("resuming"),this.bot.socket.send(JSON.stringify({op:6,d:{token:this.bot.config.token,session_id:this._sessionId,seq:this._d}}))):this.bot.socket.send(JSON.stringify({op:2,d:{token:this.bot.config.token,properties:{},compress:!1,intents:this.bot.config.intents}}))),t.op===9){if(t.d)return;this._sessionId="",D.warn("offline: invalid session"),this.bot.offline(),(_=this.bot.socket)==null||_.close()}if(t.op===0){if(t.t==="READY"){this._sessionId=t.d.session_id,this._resumeUrl=t.d.resume_gateway_url;let A=O(t.d.user);return A.selfId=A.userId,delete A.userId,Object.assign(this.bot,A),D.debug("session_id "+this._sessionId),this.bot.online()}if(t.t==="RESUMED")return this.bot.online();let i=await F(this.bot,t);i&&this.bot.dispatch(i)}t.op===7&&(this.bot.offline(),D.warn("offline: discord request reconnect"),(e=this.bot.socket)==null||e.close())}),this.bot.socket.addEventListener("close",()=>{clearInterval(this._ping)})}};I(U,"WsClient");(E=>{E.Config=c.Schema.intersect([c.Schema.object({intents:c.Schema.bitset(y).description("需要订阅的机器人事件。").default(46592)}).description("推送设置"),c.Adapter.WsClient.Config])})(U||(U={}));var yE=AE(),G=class extends h.Bot{constructor(E,_){super(E,_),this.http=E.http.extend({..._,headers:{Authorization:`Bot ${_.token}`,"User-Agent":`Koishi (https://koishi.chat/, ${yE.version})`,..._.headers}}),this.internal=new r(this.http),E.plugin(U,this)}async getSelf(){let E=await this.internal.getCurrentUser();return O(E)}async sendMessage(E,_,e,t){return new L(this,E,e,t).send(_)}async sendPrivateMessage(E,_,e){return new L(this,E,null,e).send(_)}async deleteMessage(E,_){await this.internal.deleteMessage(E,_)}async editMessage(E,_,e){let t=h.segment.normalize(e);if(e=t.toString(),t.find(A=>A.type==="image"))throw new Error("You can't include embed object(s) while editing message.");await this.internal.editMessage(E,_,{content:e})}async getMessage(E,_){let e=await this.internal.getChannelMessage(E,_);return await C(this,e)}async getMessageList(E,_){let e=(await this.internal.getChannelMessages(E,{before:_,limit:50})).reverse();return await Promise.all(e.map(t=>C(this,t)))}async getUser(E){let _=await this.internal.getUser(E);return O(_)}async getGuildMemberList(E){return(await this.internal.listGuildMembers(E)).map(e=>O(e.user))}async getChannel(E){let _=await this.internal.getChannel(E);return k(_)}async getGuildMember(E,_){let e=await this.internal.getGuildMember(E,_);return{...O(e.user),nickname:e.nick}}async kickGuildMember(E,_){return this.internal.removeGuildMember(E,_)}async getGuild(E){let _=await this.internal.getGuild(E);return Y(_)}async getGuildList(){return(await this.internal.getCurrentUserGuilds()).map(_=>Y(_))}async getChannelList(E){return(await this.internal.getGuildChannels(E)).map(e=>k(e))}};I(G,"DiscordBot");(E=>{E.Config=h.Schema.intersect([h.Schema.object({token:h.Schema.string().description("机器人的用户令牌。").role("secret").required()}),U.Config,L.Config,h.Quester.createConfig("https://discord.com/api/v10")])})(G||(G={}));G.prototype.platform="discord";var Ee=G});var u={};KE(u,{default:()=>ee});R();var VE=_E(EE(),1);T(u,_E(EE(),1));var ee=VE.DiscordBot;export{ee as default};
