var _=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var d=(r,e)=>()=>(r&&(e=r(r=0)),e);var N=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var f=(r,e,o,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of C(e))!M.call(r,a)&&a!==o&&_(r,a,{get:()=>e[a],enumerable:!(t=j(e,a))||t.enumerable});return r},i=(r,e,o)=>(f(r,e,"default"),o&&f(o,e,"default"));var k=r=>f(_({},"__esModule",{value:!0}),r);import{Buffer as h}from"https://registry.koishi.chat/modules/buffer/index.js";import y from"https://registry.koishi.chat/modules/process/index.js";var p=d(()=>{});var n={};import*as R from"https://registry.koishi.chat/modules/koishi/index.js";var v=d(()=>{p();i(n,R)});var G=N((T,g)=>{p();var c=Object.defineProperty,z=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,P=(r,e)=>c(r,"name",{value:e,configurable:!0}),q=(r,e)=>{for(var o in e)c(r,o,{get:e[o],enumerable:!0})},B=(r,e,o,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of D(e))!S.call(r,a)&&a!==o&&c(r,a,{get:()=>e[a],enumerable:!(t=z(e,a))||t.enumerable});return r},E=r=>B(c({},"__esModule",{value:!0}),r),x={};q(x,{Config:()=>F,apply:()=>b,name:()=>A,parsePlatform:()=>l});g.exports=E(x);var s=(v(),k(n)),J={commands:{echo:{description:"发送消息",options:{escape:"发送转义消息",unescape:"发送反转义消息",user:"发送到用户",channel:"发送到频道",guild:"指定群组编号"},messages:{"expect-text":"请输入要发送的文本。","platform-not-found":"找不到指定的平台。"}}}};function l(r){let e=r.indexOf(":"),o=r.slice(0,e),t=r.slice(e+1);return[o,t]}P(l,"parsePlatform");var A="echo",F=s.Schema.object({});function b(r){r.i18n.define("zh",J),r.command("echo <message:text>").option("escape","-e",{authority:3}).option("unescape","-E",{authority:3}).option("user","-u [user:user]",{authority:3}).option("channel","-c [channel:channel]",{authority:3}).option("guild","-g [guild:string]",{authority:3}).action(async({options:e,session:o},t)=>{if(!t)return o.text(".expect-text");e.unescape&&(t=s.h.unescape(t)),e.escape&&(t=s.h.escape(t));let a=e.user||e.channel;if(a){let[O,m]=l(a),u=r.bots.find(w=>w.platform===O);if(u)e.user?await u.sendPrivateMessage(m,t):await u.sendMessage(m,t,e.guild);else return o.text(".platform-not-found");return}return t})}P(b,"apply")});export default G();
