var C=Object.defineProperty;var L=(t,e)=>{for(var r in e)C(t,r,{get:e[r],enumerable:!0})};import{Buffer as s}from"https://registry.koishi.chat/modules/buffer/index.js";import F from"https://registry.koishi.chat/modules/process/index.js";var f={};L(f,{access:()=>E,getHandle:()=>i,mkdir:()=>v,readFile:()=>R,readdir:()=>S,stat:()=>N,unlink:()=>l,writeFile:()=>c});import{Buffer as D}from"https://registry.koishi.chat/modules/buffer/index.js";var g=Object.defineProperty,o=(t,e)=>g(t,"name",{value:e,configurable:!0});async function c(t,e){let r=await navigator.storage.getDirectory(),a=t.split("/").filter(Boolean),_=a.pop();for(let I of a)r=await r.getDirectoryHandle(I,{create:!0});let n=await(await r.getFileHandle(_,{create:!0})).createWritable();typeof e=="string"&&(e=new TextEncoder().encode(e)),await n.write(e),await n.close()}o(c,"writeFile");async function R(t,e="binary"){let r=await navigator.storage.getDirectory(),a=t.split("/").filter(Boolean),_=a.pop();for(let I of a)r=await r.getDirectoryHandle(I);let n=await(await r.getFileHandle(_)).getFile();return e==="utf8"?await n.text():D.from(await n.arrayBuffer())}o(R,"readFile");async function S(t){let e=await navigator.storage.getDirectory(),r=t.split("/").filter(Boolean);for(let _ of r)e=await e.getDirectoryHandle(_);let a=[];for await(let _ of e.keys())a.push(_);return a}o(S,"readdir");async function v(t,e){let r=await navigator.storage.getDirectory(),a=t.split("/").filter(Boolean);for(let _ of a)r=await r.getDirectoryHandle(_,{create:!0})}o(v,"mkdir");async function l(t){let e=await navigator.storage.getDirectory(),r=t.split("/").filter(Boolean),a=r.pop();for(let _ of r)e=await e.getDirectoryHandle(_);await e.removeEntry(a,{recursive:!0})}o(l,"unlink");async function i(t){let e,r=await navigator.storage.getDirectory(),a=t.split("/").filter(Boolean),_=a.pop();for(let O of a)r=await r.getDirectoryHandle(O);try{e=await r.getFileHandle(_)}catch{e=await r.getDirectoryHandle(_)}return e}o(i,"getHandle");async function N(t,e){let r=await i(t);return{isFile:()=>r.kind==="file",isDirectory:()=>r.kind==="directory"}}o(N,"stat");async function E(t,e){await i(t)}o(E,"access");var U=Object.defineProperty,T=(t,e)=>{for(var r in e)U(t,r,{get:e[r],enumerable:!0})},m={};T(m,{COPYFILE_EXCL:()=>De,COPYFILE_FICLONE:()=>Te,COPYFILE_FICLONE_FORCE:()=>de,F_OK:()=>Ee,O_APPEND:()=>$,O_CREAT:()=>J,O_DIRECTORY:()=>ee,O_DSYNC:()=>ae,O_EXCL:()=>q,O_NOCTTY:()=>Q,O_NOFOLLOW:()=>re,O_NONBLOCK:()=>oe,O_RDONLY:()=>u,O_RDWR:()=>w,O_SYMLINK:()=>_e,O_SYNC:()=>te,O_TRUNC:()=>Z,O_WRONLY:()=>y,R_OK:()=>fe,S_IFBLK:()=>k,S_IFCHR:()=>A,S_IFDIR:()=>h,S_IFIFO:()=>x,S_IFLNK:()=>b,S_IFMT:()=>G,S_IFREG:()=>M,S_IFSOCK:()=>j,S_IRGRP:()=>Fe,S_IROTH:()=>ve,S_IRUSR:()=>ie,S_IRWXG:()=>se,S_IRWXO:()=>Se,S_IRWXU:()=>ne,S_IWGRP:()=>ce,S_IWOTH:()=>le,S_IWUSR:()=>Oe,S_IXGRP:()=>Re,S_IXOTH:()=>Ne,S_IXUSR:()=>Ie,UV_DIRENT_BLOCK:()=>B,UV_DIRENT_CHAR:()=>X,UV_DIRENT_DIR:()=>P,UV_DIRENT_FIFO:()=>W,UV_DIRENT_FILE:()=>Y,UV_DIRENT_LINK:()=>V,UV_DIRENT_SOCKET:()=>H,UV_DIRENT_UNKNOWN:()=>K,UV_FS_COPYFILE_EXCL:()=>ge,UV_FS_COPYFILE_FICLONE:()=>Ue,UV_FS_COPYFILE_FICLONE_FORCE:()=>me,UV_FS_O_FILEMAP:()=>z,UV_FS_SYMLINK_DIR:()=>d,UV_FS_SYMLINK_JUNCTION:()=>p,W_OK:()=>Ce,X_OK:()=>Le});var d=1,p=2,u=0,y=1,w=2,K=0,Y=1,P=2,V=3,W=4,H=5,X=6,B=7,G=61440,M=32768,h=16384,A=8192,k=24576,x=4096,b=40960,j=49152,J=512,q=2048,z=0,Q=131072,Z=1024,$=8,ee=1048576,re=256,te=128,ae=4194304,_e=2097152,oe=4,ne=448,ie=256,Oe=128,Ie=64,se=56,Fe=32,ce=16,Re=8,Se=7,ve=4,le=2,Ne=1,Ee=0,fe=4,Ce=2,Le=1,ge=1,De=1,Ue=2,Te=2,me=4,de=4;export{m as constants,f as promises};
