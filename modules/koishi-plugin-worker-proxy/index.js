var h=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(r&&(e=r(r=0)),e);var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var p=(r,e,i,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of x(e))!b.call(r,l)&&l!==i&&h(r,l,{get:()=>e[l],enumerable:!(c=q(e,l))||c.enumerable});return r},o=(r,e,i)=>(p(r,e,"default"),i&&p(i,e,"default"));var _=r=>p(h({},"__esModule",{value:!0}),r);import{Buffer as m}from"https://registry.koishi.chat/modules/buffer/index.js";import d from"https://registry.koishi.chat/modules/process/index.js";var s=f(()=>{});var n={};import*as U from"https://registry.koishi.chat/modules/koishi/index.js";var y=f(()=>{s();o(n,U)});var u={};import*as O from"https://registry.koishi.chat/modules/axios/index.js";var S=f(()=>{s();o(u,O)});var C=w(t=>{s();var g=t&&t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t,"__esModule",{value:!0});t.apply=t.Config=t.name=void 0;var a=(y(),_(n)),j=g((S(),_(u)));t.name="worker-proxy";t.Config=a.Schema.object({url:a.Schema.string().required().description("地址"),mode:a.Schema.union([a.Schema.const(!0).description("白名单"),a.Schema.const(!1).description("黑名单")]).default(!0).description("模式"),list:a.Schema.array(String).role("table").description("域名列表")});function k(r,e){j.default.interceptors.request.use(i=>{try{if(e.list.includes(new URL(i.url).hostname)===e.mode){let c=new URL(e.url);c.searchParams.set("url",i.url),i.url=c.href}}finally{return i}})}t.apply=k});export default C();
