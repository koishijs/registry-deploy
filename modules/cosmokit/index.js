import{Buffer as c}from"https://registry.koishi.chat/modules/buffer/index.js";import j from"https://registry.koishi.chat/modules/process/index.js";var $=Object.defineProperty,r=(e,t)=>$(e,"name",{value:t,configurable:!0});function x(){}r(x,"noop");function l(e){return e==null}r(l,"isNullable");function k(e){return e&&typeof e=="object"&&!Array.isArray(e)}r(k,"isPlainObject");function m(e,t){return Object.fromEntries(Object.entries(e).map(([o,i])=>[o,t(i,o)]))}r(m,"valueMap");function p(e,t){return e in globalThis&&t instanceof globalThis[e]||Object.prototype.toString.call(t).slice(8,-1)===e}r(p,"is");function y(e){return!e||typeof e!="object"?e:Array.isArray(e)?e.map(y):p("Date",e)?new Date(e.valueOf()):p("RegExp",e)?new RegExp(e.source,e.flags):m(e,y)}r(y,"clone");function d(e,t,o){return e===t||!o&&l(e)&&l(t)?!0:typeof e!=typeof t||typeof e!="object"||!e||!t?!1:Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((i,f)=>d(i,t[f])):Array.isArray(t)?!1:Object.keys({...e,...t}).every(i=>d(e[i],t[i]))}r(d,"deepEqual");function F(e,t,o){if(!t)return{...e};let i={};for(let f of t)(o||f in e)&&(i[f]=e[f]);return i}r(F,"pick");function N(e,t){if(!t)return{...e};let o={...e};for(let i of t)Reflect.deleteProperty(o,i);return o}r(N,"omit");function P(e,t,o){return Object.defineProperty(e,t,{writable:!0,value:o})}r(P,"defineProperty");function _(e,t){return t.every(o=>e.includes(o))}r(_,"contain");function B(e,t){return e.filter(o=>t.includes(o))}r(B,"intersection");function E(e,t){return e.filter(o=>!t.includes(o))}r(E,"difference");function L(e,t){return Array.from(new Set([...e,...t]))}r(L,"union");function R(e){return[...new Set(e)]}r(R,"deduplicate");function U(e,t){let o=e.indexOf(t);return o>=0?(e.splice(o,1),!0):!1}r(U,"remove");function Y(e){return Array.isArray(e)?e:l(e)?[]:[e]}r(Y,"makeArray");function q(e){if(typeof c<"u")return c.from(e).toString("base64");let t="",o=new Uint8Array(e);for(let i=0;i<o.byteLength;i++)t+=String.fromCharCode(o[i]);return btoa(t)}r(q,"arrayBufferToBase64");function Z(e){if(typeof c<"u")return c.from(e,"base64").buffer;let t=atob(e.replace(/\s/g,"")),o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return o}r(Z,"base64ToArrayBuffer");function H(e){return e.charAt(0).toUpperCase()+e.slice(1)}r(H,"capitalize");function g(e){return e.charAt(0).toLowerCase()+e.slice(1)}r(g,"uncapitalize");function O(e){return e.replace(/[_-][a-z]/g,t=>t.slice(1).toUpperCase())}r(O,"camelCase");function z(e){return g(e).replace(/_/g,"-").replace(/.[A-Z]+/g,t=>t[0]+"-"+t.slice(1).toLowerCase())}r(z,"paramCase");function W(e){return g(e).replace(/-/g,"_").replace(/.[A-Z]+/g,t=>t[0]+"_"+t.slice(1).toLowerCase())}r(W,"snakeCase");var Q=O,V=z;function S(e){return e.replace(/\/$/,"")}r(S,"trimSlash");function G(e){return e.startsWith("/")||(e="/"+e),S(e)}r(G,"sanitize");var A;(e=>{e.millisecond=1,e.second=1e3,e.minute=e.second*60,e.hour=e.minute*60,e.day=e.hour*24,e.week=e.day*7;let t=new Date().getTimezoneOffset();function o(n){t=n}e.setTimezoneOffset=o,r(o,"setTimezoneOffset");function i(){return t}e.getTimezoneOffset=i,r(i,"getTimezoneOffset");function f(n=new Date,a){return typeof n=="number"&&(n=new Date(n)),a===void 0&&(a=t),Math.floor((n.valueOf()/e.minute-a)/1440)}e.getDateNumber=f,r(f,"getDateNumber");function h(n,a){let M=new Date(n*e.day);return a===void 0&&(a=t),new Date(+M+a*e.minute)}e.fromDateNumber=h,r(h,"fromDateNumber");let v=/\d+(?:\.\d+)?/.source,C=new RegExp(`^${["w(?:eek(?:s)?)?","d(?:ay(?:s)?)?","h(?:our(?:s)?)?","m(?:in(?:ute)?(?:s)?)?","s(?:ec(?:ond)?(?:s)?)?"].map(n=>`(${v}${n})?`).join("")}$`);function s(n){let a=C.exec(n);return a?(parseFloat(a[1])*e.week||0)+(parseFloat(a[2])*e.day||0)+(parseFloat(a[3])*e.hour||0)+(parseFloat(a[4])*e.minute||0)+(parseFloat(a[5])*e.second||0):0}e.parseTime=s,r(s,"parseTime");function b(n){let a=s(n);return a?n=Date.now()+a:/^\d{1,2}(:\d{1,2}){1,2}$/.test(n)?n=`${new Date().toLocaleDateString()}-${n}`:/^\d{1,2}-\d{1,2}-\d{1,2}(:\d{1,2}){1,2}$/.test(n)&&(n=`${new Date().getFullYear()}-${n}`),n?new Date(n):new Date}e.parseDate=b,r(b,"parseDate");function D(n){let a=Math.abs(n);return a>=e.day-e.hour/2?Math.round(n/e.day)+"d":a>=e.hour-e.minute/2?Math.round(n/e.hour)+"h":a>=e.minute-e.second/2?Math.round(n/e.minute)+"m":a>=e.second?Math.round(n/e.second)+"s":n+"ms"}e.format=D,r(D,"format");function u(n,a=2){return n.toString().padStart(a,"0")}e.toDigits=u,r(u,"toDigits");function w(n,a=new Date){return n.replace("yyyy",a.getFullYear().toString()).replace("yy",a.getFullYear().toString().slice(2)).replace("MM",u(a.getMonth()+1)).replace("dd",u(a.getDate())).replace("hh",u(a.getHours())).replace("mm",u(a.getMinutes())).replace("ss",u(a.getSeconds())).replace("SSS",u(a.getMilliseconds(),3))}e.template=w,r(w,"template")})(A||(A={}));export{A as Time,q as arrayBufferToBase64,Z as base64ToArrayBuffer,O as camelCase,Q as camelize,H as capitalize,y as clone,_ as contain,R as deduplicate,d as deepEqual,P as defineProperty,E as difference,V as hyphenate,B as intersection,p as is,l as isNullable,k as isPlainObject,Y as makeArray,x as noop,N as omit,z as paramCase,F as pick,U as remove,G as sanitize,W as snakeCase,S as trimSlash,g as uncapitalize,L as union,m as valueMap};
